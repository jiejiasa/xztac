{"remainingRequest":"D:\\work\\xzt-project\\xztacti\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\xzt-project\\xztacti\\ruoyi-ui\\src\\views\\activiti\\definition\\definition\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\xzt-project\\xztacti\\ruoyi-ui\\src\\views\\activiti\\definition\\definition\\index.vue","mtime":1695363031290},{"path":"D:\\work\\xzt-project\\xztacti\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1697822377972},{"path":"D:\\work\\xzt-project\\xztacti\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1695264635118},{"path":"D:\\work\\xzt-project\\xztacti\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1697822377972},{"path":"D:\\work\\xzt-project\\xztacti\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1697822378454}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGxpc3REZWZpbml0aW9uLCBkZWxEZWZpbml0aW9uLCBzdXNwZW5kT3JBY3RpdmVEZWZpbml0aW9uLCBjb252ZXJ0Mk1vZGVsIH0gZnJvbSAiQC9hcGkvYWN0aXZpdGkvZGVmaW5pdGlvbi5qcyIKaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAiQC91dGlscy9hY3Rpdml0aS9teVV0aWwuanMiCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkRlZmluaXRpb24iLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDpga7nvanlsYIKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgLy8g6YCJ5Lit5pWw57uECiAgICAgIGlkczogW10sCiAgICAgIC8vIOaYvuekuuaQnOe0ouadoeS7tgogICAgICBzaG93U2VhcmNoOiB0cnVlLAogICAgICAvLyDmgLvmnaHmlbAKICAgICAgdG90YWw6IDAsCiAgICAgIC8vIOa1geeoi+WumuS5ieihqOagvOaVsOaNrgogICAgICBkZWZpbml0aW9uTGlzdDogW10sCiAgICAgIC8vIOW8ueWHuuWxguagh+mimAogICAgICB0aXRsZTogIiIsCiAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxggogICAgICBvcGVuOiBmYWxzZSwKICAgICAgLy8g5pel5pyf6IyD5Zu0CiAgICAgIGRhdGVSYW5nZTogW10sCiAgICAgIC8vIOafpeivouWPguaVsAogICAgICBxdWVyeVBhcmFtczogewogICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIGtleTogdW5kZWZpbmVkLAogICAgICAgIG5hbWU6IHVuZGVmaW5lZCwKICAgICAgICBjYXRlZ29yeTogdW5kZWZpbmVkLAogICAgICB9LAogICAgICAvLyDooajljZXlj4LmlbAKICAgICAgZm9ybToge30sCiAgICAgIHJ1bGVzOiB7fSwKICAgICAgZm9ybURhdGE6IHsKICAgICAgICB1cGxvYWQ6IG51bGwsCiAgICAgIH0sCiAgICAgIHVwbG9hZEFjdGlvbjogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSArICcvYWN0aXZpdGkvZGVmaW5pdGlvbi91cGxvYWQnLAogICAgICB1cGxvYWRmaWxlTGlzdDogW10sCiAgICAgIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEksCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLyoqIOafpeivoua1geeoi+WumuS5ieWIl+ihqCAqLwogICAgZ2V0TGlzdCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgbGlzdERlZmluaXRpb24odGhpcy5xdWVyeVBhcmFtcykudGhlbigKICAgICAgICByZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLmRlZmluaXRpb25MaXN0ID0gcmVzcG9uc2Uucm93czsKICAgICAgICAgIHRoaXMuZGVmaW5pdGlvbkxpc3QuZm9yRWFjaChyb3cgPT4gewogICAgICAgICAgICByb3cuZGVwbG95bWVudFRpbWUgPSBmb3JtYXQocm93LmRlcGxveW1lbnRUaW1lLCAneXl5eS1NTS1kZCBISDptbTpzcycpOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UudG90YWw7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICk7CiAgICB9LAogICAgLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlUXVlcnkoKSB7CiAgICAgIHRoaXMucXVlcnlQYXJhbXMucGFnZU51bSA9IDE7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIC8qKiDph43nva7mjInpkq7mk43kvZwgKi8KICAgIHJlc2V0UXVlcnkoKSB7CiAgICAgIHRoaXMuZGF0ZVJhbmdlID0gW107CiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsKICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOwogICAgfSwKICAgIC8qKiDmlrDlop7mjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZVVwbG9hZCgpIHsKICAgICAgdGhpcy5vcGVuID0gdHJ1ZTsKICAgICAgdGhpcy50aXRsZSA9ICLpg6jnvbLmtYHnqIvlrprkuYkiOwogICAgfSwKICAgIG9uT3BlbigpIHt9LAogICAgb25DbG9zZSgpIHsKICAgICAgdGhpcy4kcmVmc1snZWxGb3JtJ10ucmVzZXRGaWVsZHMoKQogICAgfSwKICAgIGNsb3NlKCkgewogICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgdGhpcy5mb3JtRGF0YSA9IHsKICAgICAgICB1cGxvYWQ6IG51bGwsCiAgICAgIH07CiAgICAgIHRoaXMudXBsb2FkZmlsZUxpc3QgPSBbXTsKICAgIH0sCiAgICBoYW5kZWxDb25maXJtKCkgewogICAgICAvLyB0aGlzLiRyZWZzWydlbEZvcm0nXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgIC8vICAgaWYgKCF2YWxpZCkgcmV0dXJuOwogICAgICAvLyAgIHRoaXMuY2xvc2UoKQogICAgICAvLyB9KQogICAgICB0aGlzLiRyZWZzLnVwbG9hZC5zdWJtaXQoKTsKICAgICAgdGhpcy5jbG9zZSgpOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICB1cGxvYWRCZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICBsZXQgaXNSaWdodFNpemUgPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDIKICAgICAgaWYgKCFpc1JpZ2h0U2l6ZSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aWh+S7tuWkp+Wwj+i2hei/hyAyTUInKQogICAgICB9CiAgICAgIHJldHVybiBpc1JpZ2h0U2l6ZQogICAgfSwKICAgIC8qKiDmv4DmtLvmjILotbfmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZVN0YXRlKHJvdykgewogICAgICBjb25zdCBwaWQgPSByb3cuaWQ7CiAgICAgIGNvbnN0IHN1c3BlbmRTdGF0ZSA9IHJvdy5zdXNwZW5kU3RhdGU7CiAgICAgIGNvbnN0IG9wdCA9IHJvdy5zdXNwZW5kU3RhdGUgPT09ICcyJyA/ICfmv4DmtLsnOiAn5oyC6LW3JzsKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6kJyArIG9wdCArICdJROS4uiInICsgcGlkICsgJyLnmoTmtYHnqIvlrprkuYk/JywgIuitpuWRiiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IGRhdGEgPSB7ICJpZCI6IHBpZCwgInN1c3BlbmRTdGF0ZSI6IHN1c3BlbmRTdGF0ZSB9OwogICAgICAgIHJldHVybiBzdXNwZW5kT3JBY3RpdmVEZWZpbml0aW9uKGRhdGEpOwogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOwogICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDovazmqKHlnovmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZUNvbnZlcnQocm93KSB7CiAgICAgIGNvbnN0IHBpZCA9IHJvdy5pZDsKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5bCGSUTkuLoiJyArIHBpZCArICci55qE5rWB56iL5a6a5LmJ6L2s5o2i5oiQ5rWB56iL5qih5Z6LPycsICLorablkYoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zdCBkYXRhID0geyAicHJvY2Vzc0RlZmluaXRpb25JZCI6IHBpZCB9OwogICAgICAgIHJldHVybiBjb252ZXJ0Mk1vZGVsKGRhdGEpOwogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOwogICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDliKDpmaTmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZURlbGV0ZShyb3cpIHsKICAgICAgY29uc3QgZGVwbG95bWVudElkID0gcm93LmRlcGxveW1lbnRJZDsKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6ZmkSUTkuLoiJyArIGRlcGxveW1lbnRJZCArICci55qE5pWw5o2u6aG5PycsICLorablkYoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gZGVsRGVmaW5pdGlvbihkZXBsb3ltZW50SWQpOwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgIH0pOwogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/activiti/definition/definition","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"queryParams\" ref=\"queryForm\" v-show=\"showSearch\" :inline=\"true\">\n      <el-form-item label=\"KEY\" prop=\"key\">\n        <el-input\n          v-model=\"queryParams.key\"\n          placeholder=\"请输入流程KEY\"\n          clearable\n          size=\"small\"\n          style=\"width: 240px\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item label=\"名称\" prop=\"name\">\n        <el-input\n          v-model=\"queryParams.name\"\n          placeholder=\"请输入名称\"\n          clearable\n          size=\"small\"\n          style=\"width: 240px\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item label=\"所属分类\" prop=\"name\">\n        <el-input\n          v-model=\"queryParams.category\"\n          placeholder=\"请输入所属分类\"\n          clearable\n          size=\"small\"\n          style=\"width: 240px\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"cyan\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n    <el-row :gutter=\"10\" class=\"mb8\">\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"primary\"\n          icon=\"el-icon-upload\"\n          size=\"mini\"\n          @click=\"handleUpload\"\n        >部署流程定义</el-button>\n        <span style=\"color: red; font-size: 12px;\">（查看流程图模糊时，可选择 .bpmn 和 .png 一同打成 zip 包部署）</span>\n      </el-col>\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\n    </el-row>\n\n    <el-table v-loading=\"loading\" :data=\"definitionList\">\n      <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\n      <el-table-column label=\"流程ID\" align=\"center\" prop=\"id\" width=\"120\" />\n      <el-table-column label=\"流程KEY\" align=\"center\" prop=\"key\" width=\"120\" />\n      <el-table-column label=\"流程名称\" align=\"center\" prop=\"name\" width=\"150\" />\n      <el-table-column label=\"版本\" align=\"center\" prop=\"version\" width=\"90\" />\n      <el-table-column label=\"流程描述\" align=\"center\" prop=\"description\" width=\"150\" />\n      <el-table-column label=\"所属分类\" align=\"center\" prop=\"category\" width=\"120\" />\n      <el-table-column label=\"部署时间\" align=\"center\" prop=\"deploymentTime\" width=\"100\" />\n      <!--<el-table-column label=\"流程定义\" align=\"center\" prop=\"resourceName\" width=\"120\">\n        <template slot-scope=\"scope\">\n          <a\n            :href=\"baseURL + '/activiti/definition/readResource?pdid=' + scope.row.id + '&resourceName=' + scope.row.resourceName \"\n            target=\"_blank\"\n            style=\"color: #409EFF;\"\n          >{{ scope.row.resourceName.substring(scope.row.resourceName.lastIndexOf('/') + 1) }}</a>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"流程图\" align=\"center\" prop=\"diagramResourceName\" width=\"120\">\n        <template slot-scope=\"scope\">\n          <img\n            style=\"width: 100px;\"\n            :src=\"baseURL + '/activiti/definition/readResource?pdid=' + scope.row.id + '&resourceName=' + scope.row.diagramResourceName\"\n          />\n        </template>\n      </el-table-column>-->\n      <el-table-column label=\"状态\" align=\"center\" prop=\"suspendStateName\" width=\"90\" />\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-sort\"\n            @click=\"handleState(scope.row)\"\n          >{{ scope.row.suspendState === '2' ? '激活' : '挂起' }}</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-refresh\"\n            @click=\"handleConvert(scope.row)\"\n          >转模型</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-delete\"\n            @click=\"handleDelete(scope.row)\"\n          >删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination\n      v-show=\"total>0\"\n      :total=\"total\"\n      :page.sync=\"queryParams.pageNum\"\n      :limit.sync=\"queryParams.pageSize\"\n      @pagination=\"getList\"\n    />\n\n    <!-- 部署流程定义对话框 -->\n    <el-dialog v-bind=\"$attrs\" v-on=\"$listeners\" @open=\"onOpen\" @close=\"onClose\" :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\n      <el-form ref=\"elForm\" :model=\"formData\" :rules=\"rules\" size=\"medium\" label-width=\"100px\">\n        <el-form-item label=\"上传\" prop=\"upload\" required>\n          <el-upload ref=\"upload\" :file-list=\"uploadfileList\" :action=\"uploadAction\"\n                     :before-upload=\"uploadBeforeUpload\">\n            <el-button size=\"small\" type=\"primary\" icon=\"el-icon-upload\">点击上传</el-button>\n          </el-upload>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button @click=\"close\">取消</el-button>\n        <el-button type=\"primary\" @click=\"handelConfirm\">确定</el-button>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport { listDefinition, delDefinition, suspendOrActiveDefinition, convert2Model } from \"@/api/activiti/definition.js\"\nimport { format } from \"@/utils/activiti/myUtil.js\"\n\nexport default {\n  name: \"Definition\",\n  data() {\n    return {\n      // 遮罩层\n      loading: true,\n      // 选中数组\n      ids: [],\n      // 显示搜索条件\n      showSearch: true,\n      // 总条数\n      total: 0,\n      // 流程定义表格数据\n      definitionList: [],\n      // 弹出层标题\n      title: \"\",\n      // 是否显示弹出层\n      open: false,\n      // 日期范围\n      dateRange: [],\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        key: undefined,\n        name: undefined,\n        category: undefined,\n      },\n      // 表单参数\n      form: {},\n      rules: {},\n      formData: {\n        upload: null,\n      },\n      uploadAction: process.env.VUE_APP_BASE_API + '/activiti/definition/upload',\n      uploadfileList: [],\n      baseURL: process.env.VUE_APP_BASE_API,\n    };\n  },\n  created() {\n    this.getList();\n  },\n  methods: {\n    /** 查询流程定义列表 */\n    getList() {\n      this.loading = true;\n      listDefinition(this.queryParams).then(\n        response => {\n          this.definitionList = response.rows;\n          this.definitionList.forEach(row => {\n            row.deploymentTime = format(row.deploymentTime, 'yyyy-MM-dd HH:mm:ss');\n          });\n          this.total = response.total;\n          this.loading = false;\n        }\n      );\n    },\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.dateRange = [];\n      this.resetForm(\"queryForm\");\n      this.handleQuery();\n    },\n    /** 新增按钮操作 */\n    handleUpload() {\n      this.open = true;\n      this.title = \"部署流程定义\";\n    },\n    onOpen() {},\n    onClose() {\n      this.$refs['elForm'].resetFields()\n    },\n    close() {\n      this.open = false;\n      this.formData = {\n        upload: null,\n      };\n      this.uploadfileList = [];\n    },\n    handelConfirm() {\n      // this.$refs['elForm'].validate(valid => {\n      //   if (!valid) return;\n      //   this.close()\n      // })\n      this.$refs.upload.submit();\n      this.close();\n      this.getList();\n    },\n    uploadBeforeUpload(file) {\n      let isRightSize = file.size / 1024 / 1024 < 2\n      if (!isRightSize) {\n        this.$message.error('文件大小超过 2MB')\n      }\n      return isRightSize\n    },\n    /** 激活挂起按钮操作 */\n    handleState(row) {\n      const pid = row.id;\n      const suspendState = row.suspendState;\n      const opt = row.suspendState === '2' ? '激活': '挂起';\n      this.$confirm('是否确认' + opt + 'ID为\"' + pid + '\"的流程定义?', \"警告\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        const data = { \"id\": pid, \"suspendState\": suspendState };\n        return suspendOrActiveDefinition(data);\n      }).then(response => {\n        this.msgSuccess(\"操作成功\");\n        this.getList();\n      }).catch(function () {\n      });\n    },\n    /** 转模型按钮操作 */\n    handleConvert(row) {\n      const pid = row.id;\n      this.$confirm('是否确认将ID为\"' + pid + '\"的流程定义转换成流程模型?', \"警告\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        const data = { \"processDefinitionId\": pid };\n        return convert2Model(data);\n      }).then(response => {\n        this.msgSuccess(\"操作成功\");\n        this.getList();\n      }).catch(function () {\n      });\n    },\n    /** 删除按钮操作 */\n    handleDelete(row) {\n      const deploymentId = row.deploymentId;\n      this.$confirm('是否确认删除ID为\"' + deploymentId + '\"的数据项?', \"警告\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        return delDefinition(deploymentId);\n      }).then(() => {\n        this.getList();\n        this.msgSuccess(\"删除成功\");\n      }).catch(function () {\n      });\n    },\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n\n"]}]}