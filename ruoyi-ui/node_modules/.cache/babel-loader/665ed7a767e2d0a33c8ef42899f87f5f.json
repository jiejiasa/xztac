{"remainingRequest":"D:\\work\\xzt-project\\ry\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\xzt-project\\ry\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\work\\xzt-project\\ry\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\xzt-project\\ry\\ruoyi-ui\\src\\views\\activiti\\definition\\definition\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\xzt-project\\ry\\ruoyi-ui\\src\\views\\activiti\\definition\\definition\\index.vue","mtime":1695363031290},{"path":"D:\\work\\xzt-project\\ry\\ruoyi-ui\\babel.config.js","mtime":1695264502743},{"path":"D:\\work\\xzt-project\\ry\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1695264634242},{"path":"D:\\work\\xzt-project\\ry\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1695264635118},{"path":"D:\\work\\xzt-project\\ry\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1695264634242},{"path":"D:\\work\\xzt-project\\ry\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1695264635446}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIik7CnZhciBfZGVmaW5pdGlvbiA9IHJlcXVpcmUoIkAvYXBpL2FjdGl2aXRpL2RlZmluaXRpb24uanMiKTsKdmFyIF9teVV0aWwgPSByZXF1aXJlKCJAL3V0aWxzL2FjdGl2aXRpL215VXRpbC5qcyIpOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQgPSB7CiAgbmFtZTogIkRlZmluaXRpb24iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDpga7nvanlsYIKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgLy8g6YCJ5Lit5pWw57uECiAgICAgIGlkczogW10sCiAgICAgIC8vIOaYvuekuuaQnOe0ouadoeS7tgogICAgICBzaG93U2VhcmNoOiB0cnVlLAogICAgICAvLyDmgLvmnaHmlbAKICAgICAgdG90YWw6IDAsCiAgICAgIC8vIOa1geeoi+WumuS5ieihqOagvOaVsOaNrgogICAgICBkZWZpbml0aW9uTGlzdDogW10sCiAgICAgIC8vIOW8ueWHuuWxguagh+mimAogICAgICB0aXRsZTogIiIsCiAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxggogICAgICBvcGVuOiBmYWxzZSwKICAgICAgLy8g5pel5pyf6IyD5Zu0CiAgICAgIGRhdGVSYW5nZTogW10sCiAgICAgIC8vIOafpeivouWPguaVsAogICAgICBxdWVyeVBhcmFtczogewogICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIGtleTogdW5kZWZpbmVkLAogICAgICAgIG5hbWU6IHVuZGVmaW5lZCwKICAgICAgICBjYXRlZ29yeTogdW5kZWZpbmVkCiAgICAgIH0sCiAgICAgIC8vIOihqOWNleWPguaVsAogICAgICBmb3JtOiB7fSwKICAgICAgcnVsZXM6IHt9LAogICAgICBmb3JtRGF0YTogewogICAgICAgIHVwbG9hZDogbnVsbAogICAgICB9LAogICAgICB1cGxvYWRBY3Rpb246IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEkgKyAnL2FjdGl2aXRpL2RlZmluaXRpb24vdXBsb2FkJywKICAgICAgdXBsb2FkZmlsZUxpc3Q6IFtdLAogICAgICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLyoqIOafpeivoua1geeoi+WumuS5ieWIl+ihqCAqL2dldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICgwLCBfZGVmaW5pdGlvbi5saXN0RGVmaW5pdGlvbikodGhpcy5xdWVyeVBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5kZWZpbml0aW9uTGlzdCA9IHJlc3BvbnNlLnJvd3M7CiAgICAgICAgX3RoaXMuZGVmaW5pdGlvbkxpc3QuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7CiAgICAgICAgICByb3cuZGVwbG95bWVudFRpbWUgPSAoMCwgX215VXRpbC5mb3JtYXQpKHJvdy5kZXBsb3ltZW50VGltZSwgJ3l5eXktTU0tZGQgSEg6bW06c3MnKTsKICAgICAgICB9KTsKICAgICAgICBfdGhpcy50b3RhbCA9IHJlc3BvbnNlLnRvdGFsOwogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqL2hhbmRsZVF1ZXJ5OiBmdW5jdGlvbiBoYW5kbGVRdWVyeSgpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlTnVtID0gMTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgLyoqIOmHjee9ruaMiemSruaTjeS9nCAqL3Jlc2V0UXVlcnk6IGZ1bmN0aW9uIHJlc2V0UXVlcnkoKSB7CiAgICAgIHRoaXMuZGF0ZVJhbmdlID0gW107CiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsKICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOwogICAgfSwKICAgIC8qKiDmlrDlop7mjInpkq7mk43kvZwgKi9oYW5kbGVVcGxvYWQ6IGZ1bmN0aW9uIGhhbmRsZVVwbG9hZCgpIHsKICAgICAgdGhpcy5vcGVuID0gdHJ1ZTsKICAgICAgdGhpcy50aXRsZSA9ICLpg6jnvbLmtYHnqIvlrprkuYkiOwogICAgfSwKICAgIG9uT3BlbjogZnVuY3Rpb24gb25PcGVuKCkge30sCiAgICBvbkNsb3NlOiBmdW5jdGlvbiBvbkNsb3NlKCkgewogICAgICB0aGlzLiRyZWZzWydlbEZvcm0nXS5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy5vcGVuID0gZmFsc2U7CiAgICAgIHRoaXMuZm9ybURhdGEgPSB7CiAgICAgICAgdXBsb2FkOiBudWxsCiAgICAgIH07CiAgICAgIHRoaXMudXBsb2FkZmlsZUxpc3QgPSBbXTsKICAgIH0sCiAgICBoYW5kZWxDb25maXJtOiBmdW5jdGlvbiBoYW5kZWxDb25maXJtKCkgewogICAgICAvLyB0aGlzLiRyZWZzWydlbEZvcm0nXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgIC8vICAgaWYgKCF2YWxpZCkgcmV0dXJuOwogICAgICAvLyAgIHRoaXMuY2xvc2UoKQogICAgICAvLyB9KQogICAgICB0aGlzLiRyZWZzLnVwbG9hZC5zdWJtaXQoKTsKICAgICAgdGhpcy5jbG9zZSgpOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICB1cGxvYWRCZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uIHVwbG9hZEJlZm9yZVVwbG9hZChmaWxlKSB7CiAgICAgIHZhciBpc1JpZ2h0U2l6ZSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMjsKICAgICAgaWYgKCFpc1JpZ2h0U2l6ZSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aWh+S7tuWkp+Wwj+i2hei/hyAyTUInKTsKICAgICAgfQogICAgICByZXR1cm4gaXNSaWdodFNpemU7CiAgICB9LAogICAgLyoqIOa/gOa0u+aMgui1t+aMiemSruaTjeS9nCAqL2hhbmRsZVN0YXRlOiBmdW5jdGlvbiBoYW5kbGVTdGF0ZShyb3cpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHZhciBwaWQgPSByb3cuaWQ7CiAgICAgIHZhciBzdXNwZW5kU3RhdGUgPSByb3cuc3VzcGVuZFN0YXRlOwogICAgICB2YXIgb3B0ID0gcm93LnN1c3BlbmRTdGF0ZSA9PT0gJzInID8gJ+a/gOa0uycgOiAn5oyC6LW3JzsKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6kJyArIG9wdCArICdJROS4uiInICsgcGlkICsgJyLnmoTmtYHnqIvlrprkuYk/JywgIuitpuWRiiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgImlkIjogcGlkLAogICAgICAgICAgInN1c3BlbmRTdGF0ZSI6IHN1c3BlbmRTdGF0ZQogICAgICAgIH07CiAgICAgICAgcmV0dXJuICgwLCBfZGVmaW5pdGlvbi5zdXNwZW5kT3JBY3RpdmVEZWZpbml0aW9uKShkYXRhKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIubXNnU3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7CiAgICAgICAgX3RoaXMyLmdldExpc3QoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgfSwKICAgIC8qKiDovazmqKHlnovmjInpkq7mk43kvZwgKi9oYW5kbGVDb252ZXJ0OiBmdW5jdGlvbiBoYW5kbGVDb252ZXJ0KHJvdykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdmFyIHBpZCA9IHJvdy5pZDsKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5bCGSUTkuLoiJyArIHBpZCArICci55qE5rWB56iL5a6a5LmJ6L2s5o2i5oiQ5rWB56iL5qih5Z6LPycsICLorablkYoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICJwcm9jZXNzRGVmaW5pdGlvbklkIjogcGlkCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gKDAsIF9kZWZpbml0aW9uLmNvbnZlcnQyTW9kZWwpKGRhdGEpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy5tc2dTdWNjZXNzKCLmk43kvZzmiJDlip8iKTsKICAgICAgICBfdGhpczMuZ2V0TGlzdCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9LAogICAgLyoqIOWIoOmZpOaMiemSruaTjeS9nCAqL2hhbmRsZURlbGV0ZTogZnVuY3Rpb24gaGFuZGxlRGVsZXRlKHJvdykgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgdmFyIGRlcGxveW1lbnRJZCA9IHJvdy5kZXBsb3ltZW50SWQ7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruiupOWIoOmZpElE5Li6IicgKyBkZXBsb3ltZW50SWQgKyAnIueahOaVsOaNrumhuT8nLCAi6K2m5ZGKIiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICgwLCBfZGVmaW5pdGlvbi5kZWxEZWZpbml0aW9uKShkZXBsb3ltZW50SWQpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuZ2V0TGlzdCgpOwogICAgICAgIF90aGlzNC5tc2dTdWNjZXNzKCLliKDpmaTmiJDlip8iKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgfQogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"names":["_definition","require","_myUtil","name","data","loading","ids","showSearch","total","definitionList","title","open","dateRange","queryParams","pageNum","pageSize","key","undefined","category","form","rules","formData","upload","uploadAction","process","env","VUE_APP_BASE_API","uploadfileList","baseURL","created","getList","methods","_this","listDefinition","then","response","rows","forEach","row","deploymentTime","format","handleQuery","resetQuery","resetForm","handleUpload","onOpen","onClose","$refs","resetFields","close","handelConfirm","submit","uploadBeforeUpload","file","isRightSize","size","$message","error","handleState","_this2","pid","id","suspendState","opt","$confirm","confirmButtonText","cancelButtonText","type","suspendOrActiveDefinition","msgSuccess","catch","handleConvert","_this3","convert2Model","handleDelete","_this4","deploymentId","delDefinition","exports","default","_default"],"sources":["src/views/activiti/definition/definition/index.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"queryParams\" ref=\"queryForm\" v-show=\"showSearch\" :inline=\"true\">\n      <el-form-item label=\"KEY\" prop=\"key\">\n        <el-input\n          v-model=\"queryParams.key\"\n          placeholder=\"请输入流程KEY\"\n          clearable\n          size=\"small\"\n          style=\"width: 240px\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item label=\"名称\" prop=\"name\">\n        <el-input\n          v-model=\"queryParams.name\"\n          placeholder=\"请输入名称\"\n          clearable\n          size=\"small\"\n          style=\"width: 240px\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item label=\"所属分类\" prop=\"name\">\n        <el-input\n          v-model=\"queryParams.category\"\n          placeholder=\"请输入所属分类\"\n          clearable\n          size=\"small\"\n          style=\"width: 240px\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"cyan\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n    <el-row :gutter=\"10\" class=\"mb8\">\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"primary\"\n          icon=\"el-icon-upload\"\n          size=\"mini\"\n          @click=\"handleUpload\"\n        >部署流程定义</el-button>\n        <span style=\"color: red; font-size: 12px;\">（查看流程图模糊时，可选择 .bpmn 和 .png 一同打成 zip 包部署）</span>\n      </el-col>\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\n    </el-row>\n\n    <el-table v-loading=\"loading\" :data=\"definitionList\">\n      <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\n      <el-table-column label=\"流程ID\" align=\"center\" prop=\"id\" width=\"120\" />\n      <el-table-column label=\"流程KEY\" align=\"center\" prop=\"key\" width=\"120\" />\n      <el-table-column label=\"流程名称\" align=\"center\" prop=\"name\" width=\"150\" />\n      <el-table-column label=\"版本\" align=\"center\" prop=\"version\" width=\"90\" />\n      <el-table-column label=\"流程描述\" align=\"center\" prop=\"description\" width=\"150\" />\n      <el-table-column label=\"所属分类\" align=\"center\" prop=\"category\" width=\"120\" />\n      <el-table-column label=\"部署时间\" align=\"center\" prop=\"deploymentTime\" width=\"100\" />\n      <!--<el-table-column label=\"流程定义\" align=\"center\" prop=\"resourceName\" width=\"120\">\n        <template slot-scope=\"scope\">\n          <a\n            :href=\"baseURL + '/activiti/definition/readResource?pdid=' + scope.row.id + '&resourceName=' + scope.row.resourceName \"\n            target=\"_blank\"\n            style=\"color: #409EFF;\"\n          >{{ scope.row.resourceName.substring(scope.row.resourceName.lastIndexOf('/') + 1) }}</a>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"流程图\" align=\"center\" prop=\"diagramResourceName\" width=\"120\">\n        <template slot-scope=\"scope\">\n          <img\n            style=\"width: 100px;\"\n            :src=\"baseURL + '/activiti/definition/readResource?pdid=' + scope.row.id + '&resourceName=' + scope.row.diagramResourceName\"\n          />\n        </template>\n      </el-table-column>-->\n      <el-table-column label=\"状态\" align=\"center\" prop=\"suspendStateName\" width=\"90\" />\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-sort\"\n            @click=\"handleState(scope.row)\"\n          >{{ scope.row.suspendState === '2' ? '激活' : '挂起' }}</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-refresh\"\n            @click=\"handleConvert(scope.row)\"\n          >转模型</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-delete\"\n            @click=\"handleDelete(scope.row)\"\n          >删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination\n      v-show=\"total>0\"\n      :total=\"total\"\n      :page.sync=\"queryParams.pageNum\"\n      :limit.sync=\"queryParams.pageSize\"\n      @pagination=\"getList\"\n    />\n\n    <!-- 部署流程定义对话框 -->\n    <el-dialog v-bind=\"$attrs\" v-on=\"$listeners\" @open=\"onOpen\" @close=\"onClose\" :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\n      <el-form ref=\"elForm\" :model=\"formData\" :rules=\"rules\" size=\"medium\" label-width=\"100px\">\n        <el-form-item label=\"上传\" prop=\"upload\" required>\n          <el-upload ref=\"upload\" :file-list=\"uploadfileList\" :action=\"uploadAction\"\n                     :before-upload=\"uploadBeforeUpload\">\n            <el-button size=\"small\" type=\"primary\" icon=\"el-icon-upload\">点击上传</el-button>\n          </el-upload>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button @click=\"close\">取消</el-button>\n        <el-button type=\"primary\" @click=\"handelConfirm\">确定</el-button>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport { listDefinition, delDefinition, suspendOrActiveDefinition, convert2Model } from \"@/api/activiti/definition.js\"\nimport { format } from \"@/utils/activiti/myUtil.js\"\n\nexport default {\n  name: \"Definition\",\n  data() {\n    return {\n      // 遮罩层\n      loading: true,\n      // 选中数组\n      ids: [],\n      // 显示搜索条件\n      showSearch: true,\n      // 总条数\n      total: 0,\n      // 流程定义表格数据\n      definitionList: [],\n      // 弹出层标题\n      title: \"\",\n      // 是否显示弹出层\n      open: false,\n      // 日期范围\n      dateRange: [],\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        key: undefined,\n        name: undefined,\n        category: undefined,\n      },\n      // 表单参数\n      form: {},\n      rules: {},\n      formData: {\n        upload: null,\n      },\n      uploadAction: process.env.VUE_APP_BASE_API + '/activiti/definition/upload',\n      uploadfileList: [],\n      baseURL: process.env.VUE_APP_BASE_API,\n    };\n  },\n  created() {\n    this.getList();\n  },\n  methods: {\n    /** 查询流程定义列表 */\n    getList() {\n      this.loading = true;\n      listDefinition(this.queryParams).then(\n        response => {\n          this.definitionList = response.rows;\n          this.definitionList.forEach(row => {\n            row.deploymentTime = format(row.deploymentTime, 'yyyy-MM-dd HH:mm:ss');\n          });\n          this.total = response.total;\n          this.loading = false;\n        }\n      );\n    },\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.dateRange = [];\n      this.resetForm(\"queryForm\");\n      this.handleQuery();\n    },\n    /** 新增按钮操作 */\n    handleUpload() {\n      this.open = true;\n      this.title = \"部署流程定义\";\n    },\n    onOpen() {},\n    onClose() {\n      this.$refs['elForm'].resetFields()\n    },\n    close() {\n      this.open = false;\n      this.formData = {\n        upload: null,\n      };\n      this.uploadfileList = [];\n    },\n    handelConfirm() {\n      // this.$refs['elForm'].validate(valid => {\n      //   if (!valid) return;\n      //   this.close()\n      // })\n      this.$refs.upload.submit();\n      this.close();\n      this.getList();\n    },\n    uploadBeforeUpload(file) {\n      let isRightSize = file.size / 1024 / 1024 < 2\n      if (!isRightSize) {\n        this.$message.error('文件大小超过 2MB')\n      }\n      return isRightSize\n    },\n    /** 激活挂起按钮操作 */\n    handleState(row) {\n      const pid = row.id;\n      const suspendState = row.suspendState;\n      const opt = row.suspendState === '2' ? '激活': '挂起';\n      this.$confirm('是否确认' + opt + 'ID为\"' + pid + '\"的流程定义?', \"警告\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        const data = { \"id\": pid, \"suspendState\": suspendState };\n        return suspendOrActiveDefinition(data);\n      }).then(response => {\n        this.msgSuccess(\"操作成功\");\n        this.getList();\n      }).catch(function () {\n      });\n    },\n    /** 转模型按钮操作 */\n    handleConvert(row) {\n      const pid = row.id;\n      this.$confirm('是否确认将ID为\"' + pid + '\"的流程定义转换成流程模型?', \"警告\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        const data = { \"processDefinitionId\": pid };\n        return convert2Model(data);\n      }).then(response => {\n        this.msgSuccess(\"操作成功\");\n        this.getList();\n      }).catch(function () {\n      });\n    },\n    /** 删除按钮操作 */\n    handleDelete(row) {\n      const deploymentId = row.deploymentId;\n      this.$confirm('是否确认删除ID为\"' + deploymentId + '\"的数据项?', \"警告\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        return delDefinition(deploymentId);\n      }).then(() => {\n        this.getList();\n        this.msgSuccess(\"删除成功\");\n      }).catch(function () {\n      });\n    },\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n\n"],"mappings":"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"}]}